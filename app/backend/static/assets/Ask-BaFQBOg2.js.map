{"version":3,"file":"Ask-BaFQBOg2.js","sources":["../../../frontend/src/pages/ask/Ask.tsx"],"sourcesContent":["import { useContext, useEffect, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Helmet } from \"react-helmet-async\";\nimport { Panel, DefaultButton, Spinner } from \"@fluentui/react\";\n\nimport styles from \"./Ask.module.css\";\n\nimport { askApi, configApi, ChatAppResponse, ChatAppRequest, RetrievalMode, VectorFieldOptions, GPT4VInput, SpeechConfig } from \"../../api\";\nimport { Answer, AnswerError } from \"../../components/Answer\";\nimport { QuestionInput } from \"../../components/QuestionInput\";\nimport { ExampleList } from \"../../components/Example\";\nimport { AnalysisPanel, AnalysisPanelTabs } from \"../../components/AnalysisPanel\";\nimport { SettingsButton } from \"../../components/SettingsButton/SettingsButton\";\nimport { useLogin, getToken, requireAccessControl } from \"../../authConfig\";\nimport { UploadFile } from \"../../components/UploadFile\";\nimport { Settings } from \"../../components/Settings/Settings\";\nimport { useMsal } from \"@azure/msal-react\";\nimport { TokenClaimsDisplay } from \"../../components/TokenClaimsDisplay\";\nimport { LoginContext } from \"../../loginContext\";\nimport { LanguagePicker } from \"../../i18n/LanguagePicker\";\n\nexport function Component(): JSX.Element {\n    const [isConfigPanelOpen, setIsConfigPanelOpen] = useState(false);\n    const [promptTemplate, setPromptTemplate] = useState<string>(\"\");\n    const [promptTemplatePrefix, setPromptTemplatePrefix] = useState<string>(\"\");\n    const [promptTemplateSuffix, setPromptTemplateSuffix] = useState<string>(\"\");\n    const [temperature, setTemperature] = useState<number>(0.3);\n    const [seed, setSeed] = useState<number | null>(null);\n    const [minimumRerankerScore, setMinimumRerankerScore] = useState<number>(0);\n    const [minimumSearchScore, setMinimumSearchScore] = useState<number>(0);\n    const [retrievalMode, setRetrievalMode] = useState<RetrievalMode>(RetrievalMode.Hybrid);\n    const [retrieveCount, setRetrieveCount] = useState<number>(3);\n    const [useSemanticRanker, setUseSemanticRanker] = useState<boolean>(true);\n    const [useSemanticCaptions, setUseSemanticCaptions] = useState<boolean>(false);\n    const [useGPT4V, setUseGPT4V] = useState<boolean>(false);\n    const [gpt4vInput, setGPT4VInput] = useState<GPT4VInput>(GPT4VInput.TextAndImages);\n    const [includeCategory, setIncludeCategory] = useState<string>(\"\");\n    const [excludeCategory, setExcludeCategory] = useState<string>(\"\");\n    const [question, setQuestion] = useState<string>(\"\");\n    const [vectorFieldList, setVectorFieldList] = useState<VectorFieldOptions[]>([VectorFieldOptions.Embedding, VectorFieldOptions.ImageEmbedding]);\n    const [useOidSecurityFilter, setUseOidSecurityFilter] = useState<boolean>(false);\n    const [useGroupsSecurityFilter, setUseGroupsSecurityFilter] = useState<boolean>(false);\n    const [showGPT4VOptions, setShowGPT4VOptions] = useState<boolean>(false);\n    const [showSemanticRankerOption, setShowSemanticRankerOption] = useState<boolean>(false);\n    const [showVectorOption, setShowVectorOption] = useState<boolean>(false);\n    const [showUserUpload, setShowUserUpload] = useState<boolean>(false);\n    const [showLanguagePicker, setshowLanguagePicker] = useState<boolean>(false);\n    const [showSpeechInput, setShowSpeechInput] = useState<boolean>(false);\n    const [showSpeechOutputBrowser, setShowSpeechOutputBrowser] = useState<boolean>(false);\n    const [showSpeechOutputAzure, setShowSpeechOutputAzure] = useState<boolean>(false);\n    const audio = useRef(new Audio()).current;\n    const [isPlaying, setIsPlaying] = useState(false);\n\n    const lastQuestionRef = useRef<string>(\"\");\n\n    const [isLoading, setIsLoading] = useState<boolean>(false);\n    const [error, setError] = useState<unknown>();\n    const [answer, setAnswer] = useState<ChatAppResponse>();\n    // For the Ask tab, this array will hold a maximum of one URL\n    const [speechUrls, setSpeechUrls] = useState<(string | null)[]>([]);\n\n    const speechConfig: SpeechConfig = {\n        speechUrls,\n        setSpeechUrls,\n        audio,\n        isPlaying,\n        setIsPlaying\n    };\n\n    const [activeCitation, setActiveCitation] = useState<string>();\n    const [activeAnalysisPanelTab, setActiveAnalysisPanelTab] = useState<AnalysisPanelTabs | undefined>(undefined);\n\n    const client = useLogin ? useMsal().instance : undefined;\n    const { loggedIn } = useContext(LoginContext);\n\n    const getConfig = async () => {\n        configApi().then(config => {\n            setShowGPT4VOptions(config.showGPT4VOptions);\n            setUseSemanticRanker(config.showSemanticRankerOption);\n            setShowSemanticRankerOption(config.showSemanticRankerOption);\n            setShowVectorOption(config.showVectorOption);\n            if (!config.showVectorOption) {\n                setRetrievalMode(RetrievalMode.Text);\n            }\n            setShowUserUpload(config.showUserUpload);\n            setshowLanguagePicker(config.showLanguagePicker);\n            setShowSpeechInput(config.showSpeechInput);\n            setShowSpeechOutputBrowser(config.showSpeechOutputBrowser);\n            setShowSpeechOutputAzure(config.showSpeechOutputAzure);\n        });\n    };\n\n    useEffect(() => {\n        getConfig();\n    }, []);\n\n    const makeApiRequest = async (question: string) => {\n        lastQuestionRef.current = question;\n\n        error && setError(undefined);\n        setIsLoading(true);\n        setActiveCitation(undefined);\n        setActiveAnalysisPanelTab(undefined);\n\n        const token = client ? await getToken(client) : undefined;\n\n        try {\n            const request: ChatAppRequest = {\n                messages: [\n                    {\n                        content: question,\n                        role: \"user\"\n                    }\n                ],\n                context: {\n                    overrides: {\n                        prompt_template: promptTemplate.length === 0 ? undefined : promptTemplate,\n                        prompt_template_prefix: promptTemplatePrefix.length === 0 ? undefined : promptTemplatePrefix,\n                        prompt_template_suffix: promptTemplateSuffix.length === 0 ? undefined : promptTemplateSuffix,\n                        include_category: includeCategory.length === 0 ? undefined : includeCategory,\n                        exclude_category: excludeCategory.length === 0 ? undefined : excludeCategory,\n                        top: retrieveCount,\n                        temperature: temperature,\n                        minimum_reranker_score: minimumRerankerScore,\n                        minimum_search_score: minimumSearchScore,\n                        retrieval_mode: retrievalMode,\n                        semantic_ranker: useSemanticRanker,\n                        semantic_captions: useSemanticCaptions,\n                        use_oid_security_filter: useOidSecurityFilter,\n                        use_groups_security_filter: useGroupsSecurityFilter,\n                        vector_fields: vectorFieldList,\n                        use_gpt4v: useGPT4V,\n                        gpt4v_input: gpt4vInput,\n                        language: i18n.language,\n                        ...(seed !== null ? { seed: seed } : {})\n                    }\n                },\n                // AI Chat Protocol: Client must pass on any session state received from the server\n                session_state: answer ? answer.session_state : null\n            };\n            const result = await askApi(request, token);\n            setAnswer(result);\n            setSpeechUrls([null]);\n        } catch (e) {\n            setError(e);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleSettingsChange = (field: string, value: any) => {\n        switch (field) {\n            case \"promptTemplate\":\n                setPromptTemplate(value);\n                break;\n            case \"promptTemplatePrefix\":\n                setPromptTemplatePrefix(value);\n                break;\n            case \"promptTemplateSuffix\":\n                setPromptTemplateSuffix(value);\n                break;\n            case \"temperature\":\n                setTemperature(value);\n                break;\n            case \"seed\":\n                setSeed(value);\n                break;\n            case \"minimumRerankerScore\":\n                setMinimumRerankerScore(value);\n                break;\n            case \"minimumSearchScore\":\n                setMinimumSearchScore(value);\n                break;\n            case \"retrieveCount\":\n                setRetrieveCount(value);\n                break;\n            case \"useSemanticRanker\":\n                setUseSemanticRanker(value);\n                break;\n            case \"useSemanticCaptions\":\n                setUseSemanticCaptions(value);\n                break;\n            case \"excludeCategory\":\n                setExcludeCategory(value);\n                break;\n            case \"includeCategory\":\n                setIncludeCategory(value);\n                break;\n            case \"useOidSecurityFilter\":\n                setUseOidSecurityFilter(value);\n                break;\n            case \"useGroupsSecurityFilter\":\n                setUseGroupsSecurityFilter(value);\n                break;\n            case \"useGPT4V\":\n                setUseGPT4V(value);\n                break;\n            case \"gpt4vInput\":\n                setGPT4VInput(value);\n                break;\n            case \"vectorFieldList\":\n                setVectorFieldList(value);\n                break;\n            case \"retrievalMode\":\n                setRetrievalMode(value);\n                break;\n        }\n    };\n\n    const onExampleClicked = (example: string) => {\n        makeApiRequest(example);\n        setQuestion(example);\n    };\n\n    const onShowCitation = (citation: string) => {\n        if (activeCitation === citation && activeAnalysisPanelTab === AnalysisPanelTabs.CitationTab) {\n            setActiveAnalysisPanelTab(undefined);\n        } else {\n            setActiveCitation(citation);\n            setActiveAnalysisPanelTab(AnalysisPanelTabs.CitationTab);\n        }\n    };\n\n    const onToggleTab = (tab: AnalysisPanelTabs) => {\n        if (activeAnalysisPanelTab === tab) {\n            setActiveAnalysisPanelTab(undefined);\n        } else {\n            setActiveAnalysisPanelTab(tab);\n        }\n    };\n\n    const onUseOidSecurityFilterChange = (_ev?: React.FormEvent<HTMLElement | HTMLInputElement>, checked?: boolean) => {\n        setUseOidSecurityFilter(!!checked);\n    };\n\n    const onUseGroupsSecurityFilterChange = (_ev?: React.FormEvent<HTMLElement | HTMLInputElement>, checked?: boolean) => {\n        setUseGroupsSecurityFilter(!!checked);\n    };\n\n    const { t, i18n } = useTranslation();\n\n    return (\n        <div className={styles.askContainer}>\n            {/* Setting the page title using react-helmet-async */}\n            <Helmet>\n                <title>{t(\"pageTitle\")}</title>\n            </Helmet>\n            <div className={styles.askTopSection}>\n                <div className={styles.commandsContainer}>\n                    {showUserUpload && <UploadFile className={styles.commandButton} disabled={loggedIn} />}\n                    <SettingsButton className={styles.commandButton} onClick={() => setIsConfigPanelOpen(!isConfigPanelOpen)} />\n                </div>\n                <h1 className={styles.askTitle}>{t(\"askTitle\")}</h1>\n                <div className={styles.askQuestionInput}>\n                    <QuestionInput\n                        placeholder={t(\"gpt4vExamples.placeholder\")}\n                        disabled={isLoading}\n                        initQuestion={question}\n                        onSend={question => makeApiRequest(question)}\n                        showSpeechInput={showSpeechInput}\n                    />\n                </div>\n            </div>\n            <div className={styles.askBottomSection}>\n                {isLoading && <Spinner label={t(\"generatingAnswer\")} />}\n                {!lastQuestionRef.current && (\n                    <div className={styles.askTopSection}>\n                        {showLanguagePicker && <LanguagePicker onLanguageChange={newLang => i18n.changeLanguage(newLang)} />}\n                        <ExampleList onExampleClicked={onExampleClicked} useGPT4V={useGPT4V} />\n                    </div>\n                )}\n                {!isLoading && answer && !error && (\n                    <div className={styles.askAnswerContainer}>\n                        <Answer\n                            answer={answer}\n                            index={0}\n                            speechConfig={speechConfig}\n                            isStreaming={false}\n                            onCitationClicked={x => onShowCitation(x)}\n                            onThoughtProcessClicked={() => onToggleTab(AnalysisPanelTabs.ThoughtProcessTab)}\n                            onSupportingContentClicked={() => onToggleTab(AnalysisPanelTabs.SupportingContentTab)}\n                            showSpeechOutputAzure={showSpeechOutputAzure}\n                            showSpeechOutputBrowser={showSpeechOutputBrowser}\n                        />\n                    </div>\n                )}\n                {error ? (\n                    <div className={styles.askAnswerContainer}>\n                        <AnswerError error={error.toString()} onRetry={() => makeApiRequest(lastQuestionRef.current)} />\n                    </div>\n                ) : null}\n                {activeAnalysisPanelTab && answer && (\n                    <AnalysisPanel\n                        className={styles.askAnalysisPanel}\n                        activeCitation={activeCitation}\n                        onActiveTabChanged={x => onToggleTab(x)}\n                        citationHeight=\"600px\"\n                        answer={answer}\n                        activeTab={activeAnalysisPanelTab}\n                    />\n                )}\n            </div>\n\n            <Panel\n                headerText={t(\"labels.headerText\")}\n                isOpen={isConfigPanelOpen}\n                isBlocking={false}\n                onDismiss={() => setIsConfigPanelOpen(false)}\n                closeButtonAriaLabel={t(\"labels.closeButton\")}\n                onRenderFooterContent={() => <DefaultButton onClick={() => setIsConfigPanelOpen(false)}>{t(\"labels.closeButton\")}</DefaultButton>}\n                isFooterAtBottom={true}\n            >\n                <Settings\n                    promptTemplate={promptTemplate}\n                    promptTemplatePrefix={promptTemplatePrefix}\n                    promptTemplateSuffix={promptTemplateSuffix}\n                    temperature={temperature}\n                    retrieveCount={retrieveCount}\n                    seed={seed}\n                    minimumSearchScore={minimumSearchScore}\n                    minimumRerankerScore={minimumRerankerScore}\n                    useSemanticRanker={useSemanticRanker}\n                    useSemanticCaptions={useSemanticCaptions}\n                    excludeCategory={excludeCategory}\n                    includeCategory={includeCategory}\n                    retrievalMode={retrievalMode}\n                    useGPT4V={useGPT4V}\n                    gpt4vInput={gpt4vInput}\n                    vectorFieldList={vectorFieldList}\n                    showSemanticRankerOption={showSemanticRankerOption}\n                    showGPT4VOptions={showGPT4VOptions}\n                    showVectorOption={showVectorOption}\n                    useOidSecurityFilter={useOidSecurityFilter}\n                    useGroupsSecurityFilter={useGroupsSecurityFilter}\n                    useLogin={!!useLogin}\n                    loggedIn={loggedIn}\n                    requireAccessControl={requireAccessControl}\n                    onChange={handleSettingsChange}\n                />\n                {useLogin && <TokenClaimsDisplay />}\n            </Panel>\n        </div>\n    );\n}\n\nComponent.displayName = \"Ask\";\n"],"names":["Component","isConfigPanelOpen","setIsConfigPanelOpen","useState","promptTemplate","setPromptTemplate","promptTemplatePrefix","setPromptTemplatePrefix","promptTemplateSuffix","setPromptTemplateSuffix","temperature","setTemperature","seed","setSeed","minimumRerankerScore","setMinimumRerankerScore","minimumSearchScore","setMinimumSearchScore","retrievalMode","setRetrievalMode","RetrievalMode","retrieveCount","setRetrieveCount","useSemanticRanker","setUseSemanticRanker","useSemanticCaptions","setUseSemanticCaptions","useGPT4V","setUseGPT4V","gpt4vInput","setGPT4VInput","GPT4VInput","includeCategory","setIncludeCategory","excludeCategory","setExcludeCategory","question","setQuestion","vectorFieldList","setVectorFieldList","VectorFieldOptions","useOidSecurityFilter","setUseOidSecurityFilter","useGroupsSecurityFilter","setUseGroupsSecurityFilter","showGPT4VOptions","setShowGPT4VOptions","showSemanticRankerOption","setShowSemanticRankerOption","showVectorOption","setShowVectorOption","showUserUpload","setShowUserUpload","showLanguagePicker","setshowLanguagePicker","showSpeechInput","setShowSpeechInput","showSpeechOutputBrowser","setShowSpeechOutputBrowser","showSpeechOutputAzure","setShowSpeechOutputAzure","audio","useRef","isPlaying","setIsPlaying","lastQuestionRef","isLoading","setIsLoading","error","setError","answer","setAnswer","speechUrls","setSpeechUrls","speechConfig","activeCitation","setActiveCitation","activeAnalysisPanelTab","setActiveAnalysisPanelTab","client","useLogin","useMsal","loggedIn","useContext","LoginContext","getConfig","configApi","config","useEffect","makeApiRequest","token","getToken","request","i18n","result","askApi","e","handleSettingsChange","field","value","onExampleClicked","example","onShowCitation","citation","AnalysisPanelTabs","onToggleTab","tab","t","useTranslation","jsxs","styles","jsx","Helmet","UploadFile","SettingsButton","QuestionInput","Spinner","LanguagePicker","newLang","ExampleList","Answer","x","AnswerError","AnalysisPanel","Panel","DefaultButton","Settings","requireAccessControl","TokenClaimsDisplay"],"mappings":"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"}